<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.web.WebView?>

<BorderPane prefHeight="700.0" prefWidth="964.0" styleClass="root" stylesheets="@style.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.SeanceController">
    <top>
        <HBox alignment="CENTER_LEFT" prefHeight="80.0" prefWidth="1000.0" styleClass="header">
            <Label alignment="CENTER" styleClass="title" text="ðŸ“… Gestion des SÃ©ances" HBox.hgrow="ALWAYS">
                <font>
                    <Font name="System Bold" size="24.0" />
                </font>
                <HBox.margin>
                    <Insets left="20.0" right="20.0" />
                </HBox.margin>
            </Label>
            <padding>
                <Insets bottom="10" left="20" right="20" top="10" />
            </padding>
        </HBox>
    </top>
    <center>
        <TabPane fx:id="seanceTabPane" maxHeight="Infinity" maxWidth="Infinity" styleClass="themed-tab-pane" BorderPane.alignment="CENTER">
            <!-- Onglet Formulaire SÃ©ance Conduite -->
            <Tab closable="false" text="Formulaire SÃ©ance Conduite">
                <ScrollPane fitToHeight="false" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="AS_NEEDED">
                    <GridPane hgap="10" styleClass="formulaire" vgap="10">
                        <padding>
                            <Insets bottom="10" left="10" right="10" top="10" />
                        </padding>

                        <!-- Date de la sÃ©ance -->
                        <Label text="Date de la sÃ©ance :" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <DatePicker fx:id="dateSeanceConduite" promptText="SÃ©lectionnez une date" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        <Label fx:id="dateErrorConduite" prefHeight="26.0" prefWidth="177.0" styleClass="error-label" text="Erreur" visible="false" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                        <!-- Heure de la sÃ©ance -->
                        <Label text="Heure :" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                        <ComboBox fx:id="heureSeanceConduite" promptText="SÃ©lectionnez une heure" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                        <Label fx:id="heureErrorConduite" styleClass="error-label" text="Erreur" visible="false" GridPane.columnIndex="1" GridPane.rowIndex="3" />

                        <!-- CIN Moniteur -->
                        <Label text="CIN Moniteur :" GridPane.columnIndex="0" GridPane.rowIndex="4" />
                        <TextField fx:id="cinMoniteurConduite" promptText="Entrez le CIN du moniteur" GridPane.columnIndex="1" GridPane.rowIndex="4" />
                        <Label fx:id="cinMoniteurErrorConduite" styleClass="error-label" text="Erreur" visible="false" GridPane.columnIndex="1" GridPane.rowIndex="5" />

                        <!-- CIN Candidat -->
                        <Label text="CIN Candidat :" GridPane.columnIndex="0" GridPane.rowIndex="6" />
                        <TextField fx:id="cinCandidatConduite" promptText="Entrez le CIN du candidat" GridPane.columnIndex="1" GridPane.rowIndex="6" />
                        <Label fx:id="cinCandidatErrorConduite" cache="true" styleClass="error-label" text="Erreur" visible="false" GridPane.columnIndex="1" GridPane.rowIndex="7" />

                        <!-- VÃ©hicule -->
                        <Label text="VÃ©hicule :" GridPane.columnIndex="0" GridPane.rowIndex="8" />
                        <ComboBox fx:id="vehiculeSeanceConduite" promptText="SÃ©lectionnez une vehicule" GridPane.columnIndex="1" GridPane.rowIndex="8" />
                        <Label fx:id="vehiculeErrorConduite" styleClass="error-label" text="Erreur" visible="false" GridPane.columnIndex="1" GridPane.rowIndex="9" />

                        <!-- Commentaire -->
                        <Label text="Commentaire :" GridPane.columnIndex="0" GridPane.rowIndex="10" />
                        <TextArea fx:id="commentaireSeanceConduite" prefRowCount="3" wrapText="true" GridPane.columnIndex="1" GridPane.rowIndex="10" />

                        <!-- Localisation -->
                        <Label text="Localisation :" GridPane.columnIndex="0" GridPane.rowIndex="11" />
                        <WebView fx:id="mapViewConduite" prefHeight="400" prefWidth="600" GridPane.columnIndex="1" GridPane.rowIndex="11" />
                        <Label fx:id="mapErrorConduite" styleClass="error-label" text="Erreur" visible="false" GridPane.columnIndex="1" GridPane.rowIndex="12" />

                        <!-- Boutons -->
                        <HBox alignment="CENTER_RIGHT" spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="13">
                            <Button fx:id="annulerBtnConduite" onAction="#handleAnnuler" styleClass="back-button" text="Annuler" />
                            <Button fx:id="sauvegarderBtnConduite" onAction="#handleSauvegarderConduite" styleClass="primary-button" text="Sauvegarder" />
                        </HBox>
                        <columnConstraints>
                            <ColumnConstraints />
                            <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints /> <!-- 0: Date -->
                            <RowConstraints /> <!-- 1: Date Error -->
                            <RowConstraints /> <!-- 2: Heure -->
                            <RowConstraints /> <!-- 3: Heure Error -->
                            <RowConstraints /> <!-- 4: CIN Moniteur -->
                            <RowConstraints /> <!-- 5: CIN Moniteur Error -->
                            <RowConstraints /> <!-- 6: CIN Candidat -->
                            <RowConstraints /> <!-- 7: CIN Candidat Error -->
                            <RowConstraints /> <!-- 8: VÃ©hicule -->
                            <RowConstraints /> <!-- 9: VÃ©hicule Error -->
                            <RowConstraints /> <!-- 10: Commentaire -->
                            <RowConstraints /> <!-- 11: Localisation -->
                            <RowConstraints /> <!-- 12: Localisation Error -->
                            <RowConstraints /> <!-- 13: Boutons -->
                        </rowConstraints>
                    </GridPane>
                </ScrollPane>
            </Tab>

            <!-- Onglet SÃ©ances Conduites -->
            <Tab closable="false" text="SÃ©ances Conduites">
                <VBox prefHeight="567.0" prefWidth="1142.0" spacing="10">
                    <Label styleClass="section-title" text="Liste des SÃ©ances Conduite">
                        <font>
                            <Font name="System Bold" size="18.0" />
                        </font>
                    </Label>

                    <!-- Filtres -->
                    <HBox spacing="10" styleClass="filter-box">
                        <TextField fx:id="filtreMoniteurConduite" promptText="Filtrer par Moniteur" styleClass="filter-field" />
                        <TextField fx:id="filtreCandidatConduite" promptText="Filtrer par Candidat" styleClass="filter-field" />
                        <ComboBox fx:id="filtreVehiculeConduite" prefHeight="30.0" prefWidth="168.0" promptText="Filtrer par VÃ©hicule" styleClass="filter-combo-box" />
                        <DatePicker fx:id="filtreDateConduite" promptText="Filtrer par Date" styleClass="date-picker-filter" />
                        <Button onAction="#handleResetFiltresConduite" styleClass="filter-button" text="RÃ©initialiser Filtres" />
                    </HBox>

                    <!-- Table des SÃ©ances -->
                    <TableView fx:id="tableSeancesConduite" styleClass="data-table" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="conduitIconColumn" prefWidth="83.19999545812607" />
                            <TableColumn fx:id="colonneDateHeureConduite" prefWidth="155.99999237060547" text="Date" />
                            <TableColumn fx:id="colonneVehiculeConduite" minWidth="8.0" prefWidth="162.40000915527344" text="VÃ©hicule" />
                            <TableColumn fx:id="colonneCandidatConduite" prefWidth="143.20001220703125" text="Candidat" />
                            <TableColumn fx:id="colonneMoniteurConduite" minWidth="0.0" prefWidth="93.5999755859375" text="Moniteur" />
                            <TableColumn fx:id="colonneLocalisation" prefWidth="162.40005493164062" text="localisation" />
                            <TableColumn fx:id="conduitActionsColumn" prefWidth="118.4000244140625" text="Actions" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

            <!-- Onglet Formulaire SÃ©ance Code -->
            <Tab closable="false" text="Formulaire SÃ©ance Code">
                <GridPane hgap="10" styleClass="formulaire" vgap="10">
                    <padding>
                        <Insets bottom="10" left="10" right="10" top="10" />
                    </padding>

                    <!-- Date de la sÃ©ance -->
                    <Label text="Date de la sÃ©ance :" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                    <DatePicker fx:id="dateSeanceCode" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                    <Label fx:id="dateErrorCode" styleClass="error-label" text="Erreur" visible="false" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                    <!-- Heure de la sÃ©ance -->
                    <Label text="Heure :" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                    <ComboBox fx:id="heureSeanceCode" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                    <Label fx:id="heureErrorCode" styleClass="error-label" text="Erreur" visible="false" GridPane.columnIndex="1" GridPane.rowIndex="3" />

                    <!-- CIN Moniteur -->
                    <Label text="CIN Moniteur :" GridPane.columnIndex="0" GridPane.rowIndex="4" />
                    <TextField fx:id="cinMoniteurCode" promptText="Entrez le CIN du moniteur" GridPane.columnIndex="1" GridPane.rowIndex="4" />
                    <Label fx:id="cinMoniteurErrorCode" styleClass="error-label" text="Erreur" visible="false" GridPane.columnIndex="1" GridPane.rowIndex="5" />

                    <!-- CIN Candidat -->
                    <Label text="CIN Candidat :" GridPane.columnIndex="0" GridPane.rowIndex="6" />
                    <TextField fx:id="cinCandidatCode" promptText="Entrez le CIN du candidat" GridPane.columnIndex="1" GridPane.rowIndex="6" />
                    <Label fx:id="cinCandidatErrorCode" styleClass="error-label" text="Erreur" visible="false" GridPane.columnIndex="1" GridPane.rowIndex="7" />

                    <!-- Commentaire -->
                    <Label text="Commentaire :" GridPane.columnIndex="0" GridPane.rowIndex="8" />
                    <TextArea fx:id="commentaireSeanceCode" prefRowCount="3" wrapText="true" GridPane.columnIndex="1" GridPane.rowIndex="8" />

                    <!-- Boutons -->
                    <HBox alignment="CENTER_RIGHT" spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="9">
                        <Button fx:id="annulerBtnCode" onAction="#handleCodeAnnuler" styleClass="back-button" text="Annuler" />
                        <Button fx:id="sauvegarderBtnCode" onAction="#handleSauvegarderCode" styleClass="primary-button" text="Sauvegarder" />
                    </HBox>
                    <columnConstraints>
                        <ColumnConstraints />
                        <ColumnConstraints />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints /> <!-- 0: Date -->
                        <RowConstraints /> <!-- 1: Date Error -->
                        <RowConstraints /> <!-- 2: Heure -->
                        <RowConstraints /> <!-- 3: Heure Error -->
                        <RowConstraints /> <!-- 4: CIN Moniteur -->
                        <RowConstraints /> <!-- 5: CIN Moniteur Error -->
                        <RowConstraints /> <!-- 6: CIN Candidat -->
                        <RowConstraints /> <!-- 7: CIN Candidat Error -->
                        <RowConstraints /> <!-- 8: Commentaire -->
                        <RowConstraints /> <!-- 9: Boutons -->
                    </rowConstraints>
                </GridPane>
            </Tab>

            <!-- Onglet SÃ©ances Codes -->
            <Tab closable="false" text="SÃ©ances Codes">
                <VBox spacing="10">
                    <Label styleClass="section-title" text="Liste des SÃ©ances Code">
                        <font>
                            <Font name="System Bold" size="18.0" />
                        </font>
                    </Label>

                    <!-- Filtres -->
                    <HBox spacing="10" styleClass="filter-box">
                        <TextField fx:id="filtreMoniteurCode" promptText="Filtrer par Moniteur" styleClass="filter-field" />
                        <TextField fx:id="filtreCandidatCode" promptText="Filtrer par Candidat" styleClass="filter-field" />
                        <DatePicker fx:id="filtreDateCode" promptText="Filtrer par Date" styleClass="date-picker-filter" />
                        <Button onAction="#handleResetFiltresCode" styleClass="filter-button" text="RÃ©initialiser Filtres" />
                    </HBox>

                    <!-- Table des SÃ©ances -->
                    <TableView fx:id="tableSeancesCode" styleClass="data-table" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="codeIconColumn" prefWidth="91.99999386072159" />
                            <TableColumn fx:id="colonneDateCode" prefWidth="185.60009765625" text="Date" />
                            <TableColumn fx:id="colonneMoniteurCode" prefWidth="128.0" text="Moniteur" />
                            <TableColumn fx:id="colonneCandidatCode" minWidth="0.0" prefWidth="132.0" text="Candidat" />
                            <TableColumn fx:id="codeActionColumn" prefWidth="141.60003662109375" text="Actions" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
        </TabPane>
    </center>
</BorderPane>
